; NANDA A2A Server for M5StickC Plus 2
; PlatformIO Configuration
;
; Upload from WSL2 (run in this directory):
;   powershell.exe -Command "python -m esptool --chip esp32 --port COM3 --baud 1500000 write_flash -z --flash-mode dio --flash-freq 40m --flash-size detect 0x1000 .pio/build/m5stick-c-plus2/bootloader.bin 0x8000 .pio/build/m5stick-c-plus2/partitions.bin 0x10000 .pio/build/m5stick-c-plus2/firmware.bin"
;
; Monitor serial (from WSL2):
;   powershell.exe -Command "python -m serial.tools.miniterm COM3 115200"

[env:m5stick-c-plus2]
platform = espressif32
board = m5stick-c
framework = arduino
board_build.partitions = default.csv
monitor_speed = 115200
upload_speed = 1500000
upload_port = COM3

; Use M5Unified (more compatible than M5StickCPlus2)
lib_deps =
    m5stack/M5Unified@^0.2.11
    bblanchon/ArduinoJson@^7.0.0
    esphome/ESPAsyncWebServer-esphome@^3.2.2
    links2004/WebSockets@^2.4.1
    ricmoo/QRCode@^0.0.1

build_flags =
    -DARDUINO_M5STICK_C_PLUS2
    -DM5UNIFIED
